<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body {
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .container {
            width: 500px;
            height: auto;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .inputBox{
            width: 100%;
            height: 50px;
            box-sizing: border-box;
            display: flex;
        }
        #new-todo {
            width: 70%;
            height: 100%;
            box-sizing: border-box;
            font-size: 18px;
            padding: 10px;
            border: 1px solid lightgray;
            border-radius: 9999px;
            
        }
        #new-todo::placeholder { color: lightgray; }
        #add-todo {
            width: 15%;
            height: 100%;
            font-size: 18px;
            border: none;
            border-radius: 9999px;
            background-color: rgb(77, 136, 255);
            color: white;
            cursor: pointer;
        }
        #deleteAll {
            width: 15%;
            height: 100%;
            font-size: small;
            border: none;
            border-radius: 9999px;
            border: 1px solid red;
            background-color: white;
            color: red;
            cursor: pointer;
        }

        #todo-list {
            width: 100%;
            box-sizing: border-box;
            padding: 0;
        }
        #todo-list li {
            list-style: none;
            padding: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .buttons{
            display: flex;
            gap: 5px;
        }
        .editBtn {
            width: 50px;
            background-color: rgb(43, 200, 0);
            border: none;
            border-radius: 9999px;
            padding: 5px;
            color: white;
            cursor: pointer;
        }
        .deleteBtn {
            width: 50px;
            background-color: red;
            border: none;
            border-radius: 9999px;
            padding: 5px;
            color: white;
            cursor: pointer;
        }
        #todo-list li span.active {
            text-decoration: line-through;
            color: darkgray;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>My Tasks</h1>
        <div class="inputBox">
            <input type="text" id="new-todo" placeholder="Add a new task..">
            <button id="add-todo">Add +</button>
            <button id="deleteAll">Delete All</button>
        </div>
        <!-- 할일들을 아래에 표시할 예정 -->
         <ul id="todo-list">
            <li>
                <span>예시</span>
                <div class="buttons">
                    <button class="editBtn">수정</button>
                    <button class="deleteBtn">삭제</button>
                </div>
                
            </li>
         </ul>
    </div>

     <script>
        // 1. DOM 가져온다
        const addBtn = document.getElementById("add-todo");
        const deleteAllBtn = document.getElementById("deleteAll");
        const input = document.getElementById("new-todo");
        const todoList = document.getElementById("todo-list");

        // 완료, 취소 - li 클릭시, 삭제 버튼 클릭시
        todoList.addEventListener("click", (e) => {
            if(e.target.tagName == "SPAN"){
                // toggle은 클래스가 있으면 제거, 없으면 추가하는 메서드
                e.target.classList.toggle("active");
            }

            if(e.target.classList.contains("deleteBtn")){
                const parentLi = e.target.closest("li"); // 버튼의 부모 li 찾기
                parentLi.remove(); // li 삭제
            }

            if(e.target.classList.contains("editBtn")){
                const span = e.target.closest("li").querySelector("span");
                console.log(span.textContent);
                const newText = prompt("할일을 수정하세요", span.textContent);
                if(newText !== null && newText.trim() !== ""){
                    span.textContent = newText;
                }
            }
        });

        // 데이터 추가 함수
        function addTodo(){
            const newTodo = input.value; // 입력값

            if(newTodo.trim() === ""){ // 공백까지 막기
                alert("할일을 입력해주세요");
                return;
            }

            // 3. DOM에 표시한다
            // 새로운 li & span
            const new_li = document.createElement("li");
            const span = document.createElement("span");
            span.textContent = newTodo;
            // ul에 추가한다
            todoList.appendChild(new_li);
            new_li.appendChild(span);
            // 입력창 초기화
            input.value = "";

            // li 옆에 삭제 버튼 만들기
            const buttonsDiv = document.createElement("div");
            buttonsDiv.classList.add("buttons");

            const deleteBtn = document.createElement("button");
            deleteBtn.classList.add("deleteBtn");
            deleteBtn.textContent = "삭제";
            
            // 수정 버튼 만들기
            const editBtn = document.createElement("button");
            editBtn.classList.add("editBtn");
            editBtn.textContent = "수정";

            buttonsDiv.appendChild(editBtn);
            buttonsDiv.appendChild(deleteBtn);
            new_li.appendChild(buttonsDiv);
        }

        // 버튼클릭시
        addBtn.addEventListener("click", () => {
            addTodo();
        });

        // 엔터키 누를때
        input.addEventListener("keypress", (e) => {
            if(e.key == "Enter"){
                addTodo();
            }
        });

        deleteAllBtn.addEventListener("click", () => {
            todoList.innerHTML = "";
        })
     </script>
</body>
</html>