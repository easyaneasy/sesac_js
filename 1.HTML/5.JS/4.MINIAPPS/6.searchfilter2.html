<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>동적 검색 필터</h1>
    <input type="text" id="searchInput" placeholder="검색어를 입력하시오..">

    <ul id="itemList">
        <li>사과</li>
        <li>바나나</li>
        <li>오렌지</li>
        <li>포도</li>
        <li>키위</li>
        <li>파인애플</li>
        <li>복숭아</li>
        <li>자두</li>
        <li>수박</li>
        <li>멜론</li>
        <li>체리</li>
        <li>레몬</li>
        <li>라즈베리</li>
        <li>블루베리</li>
        <li>딸기</li>
        <li>망고</li>
        <li>아보카도</li>
        <li>코코넛</li>
        <li>귤</li>
        <li>파파야</li>
    </ul>

    <script>
        // DOM 가져오기
        const searchInput = document.getElementById("searchInput");
        const itemList = document.getElementById("itemList");
        const items = itemList.getElementsByTagName("li");
        const items2 = document.querySelectorAll("#itemList > li");

        let dbounceTimer = null;

        // 공통 필터 함수
        function filter() {
            // 사용자가 입력한 검색어
            const filter = searchInput.value;
            
            for(let i = 0; i < items.length; i++){
                const item = items[i];
                const text = item.textContent;

                if(text.includes(filter)){
                    item.style.display = '';
                }else {
                    item.style.display = 'none';
                }
            }
        }

        searchInput.addEventListener("input", () => {

            // 이전 타이머가 있으면 제거(초기화)
            if (dbounceTimer !== null) {
                clearTimeout(dbounceTimer);
            }

            // 새 타이머 설정 (300ms 후 실행)
            dbounceTimer = setTimeout(() => {
                filter();   // 실제 필터 함수 실행
                dbounceTimer = null; // 타이머 초기화
            }, 300);

        });
        
    </script>
</body>
</html>